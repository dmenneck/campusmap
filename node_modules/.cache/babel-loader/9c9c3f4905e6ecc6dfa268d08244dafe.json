{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar rowNodeBlock_1 = require(\"./rowNodeBlock\");\n\nvar logger_1 = require(\"../../logger\");\n\nvar context_1 = require(\"../../context/context\");\n\nvar utils_1 = require(\"../../utils\");\n\nvar RowNodeBlockLoader =\n/** @class */\nfunction () {\n  function RowNodeBlockLoader(maxConcurrentRequests, blockLoadDebounceMillis) {\n    this.activeBlockLoadsCount = 0;\n    this.blocks = [];\n    this.active = true;\n    this.maxConcurrentRequests = maxConcurrentRequests;\n\n    if (blockLoadDebounceMillis && blockLoadDebounceMillis > 0) {\n      this.checkBlockToLoadDebounce = utils_1._.debounce(this.performCheckBlocksToLoad.bind(this), blockLoadDebounceMillis);\n    }\n  }\n\n  RowNodeBlockLoader.prototype.setBeans = function (loggerFactory) {\n    this.logger = loggerFactory.create('RowNodeBlockLoader');\n  };\n\n  RowNodeBlockLoader.prototype.addBlock = function (block) {\n    this.blocks.push(block);\n  };\n\n  RowNodeBlockLoader.prototype.removeBlock = function (block) {\n    utils_1._.removeFromArray(this.blocks, block);\n  };\n\n  RowNodeBlockLoader.prototype.destroy = function () {\n    this.active = false;\n  };\n\n  RowNodeBlockLoader.prototype.loadComplete = function () {\n    this.activeBlockLoadsCount--;\n  };\n\n  RowNodeBlockLoader.prototype.checkBlockToLoad = function () {\n    if (this.checkBlockToLoadDebounce) {\n      this.checkBlockToLoadDebounce();\n    } else {\n      this.performCheckBlocksToLoad();\n    }\n  };\n\n  RowNodeBlockLoader.prototype.performCheckBlocksToLoad = function () {\n    if (!this.active) {\n      return;\n    }\n\n    this.printCacheStatus();\n\n    if (this.activeBlockLoadsCount >= this.maxConcurrentRequests) {\n      this.logger.log(\"checkBlockToLoad: max loads exceeded\");\n      return;\n    }\n\n    var blockToLoad = null;\n    this.blocks.forEach(function (block) {\n      if (block.getState() === rowNodeBlock_1.RowNodeBlock.STATE_DIRTY) {\n        blockToLoad = block;\n      }\n    });\n\n    if (blockToLoad) {\n      blockToLoad.load();\n      this.activeBlockLoadsCount++;\n      this.logger.log(\"checkBlockToLoad: loading page \" + blockToLoad.getBlockNumber());\n      this.printCacheStatus();\n    } else {\n      this.logger.log(\"checkBlockToLoad: no pages to load\");\n    }\n  };\n\n  RowNodeBlockLoader.prototype.getBlockState = function () {\n    var result = {};\n    this.blocks.forEach(function (block) {\n      var nodeIdPrefix = block.getNodeIdPrefix();\n      var stateItem = {\n        blockNumber: block.getBlockNumber(),\n        startRow: block.getStartRow(),\n        endRow: block.getEndRow(),\n        pageStatus: block.getState()\n      };\n\n      if (utils_1._.exists(nodeIdPrefix)) {\n        result[nodeIdPrefix + block.getBlockNumber()] = stateItem;\n      } else {\n        result[block.getBlockNumber()] = stateItem;\n      }\n    });\n    return result;\n  };\n\n  RowNodeBlockLoader.prototype.printCacheStatus = function () {\n    if (this.logger.isLogging()) {\n      this.logger.log(\"printCacheStatus: activePageLoadsCount = \" + this.activeBlockLoadsCount + \",\" + (\" blocks = \" + JSON.stringify(this.getBlockState())));\n    }\n  };\n\n  RowNodeBlockLoader.prototype.isLoading = function () {\n    return this.activeBlockLoadsCount > 0;\n  };\n\n  __decorate([__param(0, context_1.Qualifier('loggerFactory')), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [logger_1.LoggerFactory]), __metadata(\"design:returntype\", void 0)], RowNodeBlockLoader.prototype, \"setBeans\", null);\n\n  return RowNodeBlockLoader;\n}();\n\nexports.RowNodeBlockLoader = RowNodeBlockLoader;","map":{"version":3,"sources":["/Users/dirkmennecke77/Desktop/Lageplan/node_modules/ag-grid-community/dist/lib/rowModels/cache/rowNodeBlockLoader.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","exports","value","rowNodeBlock_1","require","logger_1","context_1","utils_1","RowNodeBlockLoader","maxConcurrentRequests","blockLoadDebounceMillis","activeBlockLoadsCount","blocks","active","checkBlockToLoadDebounce","_","debounce","performCheckBlocksToLoad","bind","prototype","setBeans","loggerFactory","logger","create","addBlock","block","push","removeBlock","removeFromArray","destroy","loadComplete","checkBlockToLoad","printCacheStatus","log","blockToLoad","forEach","getState","RowNodeBlock","STATE_DIRTY","load","getBlockNumber","getBlockState","result","nodeIdPrefix","getNodeIdPrefix","stateItem","blockNumber","startRow","getStartRow","endRow","getEndRow","pageStatus","exists","isLogging","JSON","stringify","isLoading","Qualifier","Function","LoggerFactory"],"mappings":"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","sourcesContent":["/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar rowNodeBlock_1 = require(\"./rowNodeBlock\");\nvar logger_1 = require(\"../../logger\");\nvar context_1 = require(\"../../context/context\");\nvar utils_1 = require(\"../../utils\");\nvar RowNodeBlockLoader = /** @class */ (function () {\n    function RowNodeBlockLoader(maxConcurrentRequests, blockLoadDebounceMillis) {\n        this.activeBlockLoadsCount = 0;\n        this.blocks = [];\n        this.active = true;\n        this.maxConcurrentRequests = maxConcurrentRequests;\n        if (blockLoadDebounceMillis && blockLoadDebounceMillis > 0) {\n            this.checkBlockToLoadDebounce = utils_1._.debounce(this.performCheckBlocksToLoad.bind(this), blockLoadDebounceMillis);\n        }\n    }\n    RowNodeBlockLoader.prototype.setBeans = function (loggerFactory) {\n        this.logger = loggerFactory.create('RowNodeBlockLoader');\n    };\n    RowNodeBlockLoader.prototype.addBlock = function (block) {\n        this.blocks.push(block);\n    };\n    RowNodeBlockLoader.prototype.removeBlock = function (block) {\n        utils_1._.removeFromArray(this.blocks, block);\n    };\n    RowNodeBlockLoader.prototype.destroy = function () {\n        this.active = false;\n    };\n    RowNodeBlockLoader.prototype.loadComplete = function () {\n        this.activeBlockLoadsCount--;\n    };\n    RowNodeBlockLoader.prototype.checkBlockToLoad = function () {\n        if (this.checkBlockToLoadDebounce) {\n            this.checkBlockToLoadDebounce();\n        }\n        else {\n            this.performCheckBlocksToLoad();\n        }\n    };\n    RowNodeBlockLoader.prototype.performCheckBlocksToLoad = function () {\n        if (!this.active) {\n            return;\n        }\n        this.printCacheStatus();\n        if (this.activeBlockLoadsCount >= this.maxConcurrentRequests) {\n            this.logger.log(\"checkBlockToLoad: max loads exceeded\");\n            return;\n        }\n        var blockToLoad = null;\n        this.blocks.forEach(function (block) {\n            if (block.getState() === rowNodeBlock_1.RowNodeBlock.STATE_DIRTY) {\n                blockToLoad = block;\n            }\n        });\n        if (blockToLoad) {\n            blockToLoad.load();\n            this.activeBlockLoadsCount++;\n            this.logger.log(\"checkBlockToLoad: loading page \" + blockToLoad.getBlockNumber());\n            this.printCacheStatus();\n        }\n        else {\n            this.logger.log(\"checkBlockToLoad: no pages to load\");\n        }\n    };\n    RowNodeBlockLoader.prototype.getBlockState = function () {\n        var result = {};\n        this.blocks.forEach(function (block) {\n            var nodeIdPrefix = block.getNodeIdPrefix();\n            var stateItem = {\n                blockNumber: block.getBlockNumber(),\n                startRow: block.getStartRow(),\n                endRow: block.getEndRow(),\n                pageStatus: block.getState()\n            };\n            if (utils_1._.exists(nodeIdPrefix)) {\n                result[nodeIdPrefix + block.getBlockNumber()] = stateItem;\n            }\n            else {\n                result[block.getBlockNumber()] = stateItem;\n            }\n        });\n        return result;\n    };\n    RowNodeBlockLoader.prototype.printCacheStatus = function () {\n        if (this.logger.isLogging()) {\n            this.logger.log(\"printCacheStatus: activePageLoadsCount = \" + this.activeBlockLoadsCount + \",\"\n                + (\" blocks = \" + JSON.stringify(this.getBlockState())));\n        }\n    };\n    RowNodeBlockLoader.prototype.isLoading = function () {\n        return this.activeBlockLoadsCount > 0;\n    };\n    __decorate([\n        __param(0, context_1.Qualifier('loggerFactory')),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [logger_1.LoggerFactory]),\n        __metadata(\"design:returntype\", void 0)\n    ], RowNodeBlockLoader.prototype, \"setBeans\", null);\n    return RowNodeBlockLoader;\n}());\nexports.RowNodeBlockLoader = RowNodeBlockLoader;\n"]},"metadata":{},"sourceType":"script"}