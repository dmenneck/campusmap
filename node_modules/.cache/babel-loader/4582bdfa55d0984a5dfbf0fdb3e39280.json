{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.FeatureGrid = void 0;\n\nrequire(\"antd/es/table/style\");\n\nvar _table = _interopRequireDefault(require(\"antd/es/table\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Style = _interopRequireDefault(require(\"ol/style/Style\"));\n\nvar _Fill = _interopRequireDefault(require(\"ol/style/Fill\"));\n\nvar _Circle = _interopRequireDefault(require(\"ol/style/Circle\"));\n\nvar _Stroke = _interopRequireDefault(require(\"ol/style/Stroke\"));\n\nvar _Map = _interopRequireDefault(require(\"ol/Map\"));\n\nvar _Feature = _interopRequireDefault(require(\"ol/Feature\"));\n\nvar _Vector = _interopRequireDefault(require(\"ol/source/Vector\"));\n\nvar _Vector2 = _interopRequireDefault(require(\"ol/layer/Vector\"));\n\nvar _Geometry = _interopRequireDefault(require(\"ol/geom/Geometry\"));\n\nvar _GeometryCollection = _interopRequireDefault(require(\"ol/geom/GeometryCollection\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _isFunction = _interopRequireDefault(require(\"lodash/isFunction\"));\n\nvar _kebabCase = _interopRequireDefault(require(\"lodash/kebabCase\"));\n\nvar _MapUtil = _interopRequireDefault(require(\"@terrestris/ol-util/dist/MapUtil/MapUtil\"));\n\nrequire(\"./FeatureGrid.less\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    if (i % 2) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n        }));\n      }\n\n      ownKeys.forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i]));\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\n * The FeatureGrid.\n *\n * @class The FeatureGrid\n * @extends React.Component\n */\n\n\nvar FeatureGrid =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FeatureGrid, _React$Component);\n  /**\n   * The class name to add to this component.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The class name to add to each table row.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The prefix to use for each table row class.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The hover class name.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The source holding the features of the grid.\n   * @type {ol.source.Vector}\n   * @private\n   */\n\n  /**\n   * The layer representing the features of the grid.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n\n  /**\n   * The properties.\n   * @type {Object}\n   */\n\n  /**\n   * The default properties.\n   * @type {Object}\n   */\n\n\n  function FeatureGrid(_props) {\n    var _this;\n\n    _classCallCheck(this, FeatureGrid);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FeatureGrid).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_className\", 'react-geo-feature-grid');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowClassName\", 'react-geo-feature-grid-row');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowKeyClassNamePrefix\", 'row-key-');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowHoverClassName\", 'row-hover');\n\n    _defineProperty(_assertThisInitialized(_this), \"_source\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layer\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"initVectorLayer\", function (map) {\n      var _this$props = _this.props,\n          features = _this$props.features,\n          featureStyle = _this$props.featureStyle,\n          layerName = _this$props.layerName;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      if (_MapUtil[\"default\"].getLayerByName(map, layerName)) {\n        return;\n      }\n\n      var source = new _Vector[\"default\"]({\n        features: features\n      });\n      var layer = new _Vector2[\"default\"]({\n        name: layerName,\n        source: source,\n        style: featureStyle\n      });\n      map.addLayer(layer);\n      _this._source = source;\n      _this._layer = layer;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initMapEventHandlers\", function (map) {\n      var selectable = _this.props.selectable;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.on('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.on('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapPointerMove\", function (olEvt) {\n      var _this$props2 = _this.props,\n          map = _this$props2.map,\n          features = _this$props2.features,\n          highlightStyle = _this$props2.highlightStyle,\n          selectStyle = _this$props2.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n      features.forEach(function (feature) {\n        var key = (0, _kebabCase[\"default\"])(_this.props.keyFunction(feature));\n        var sel = \".\".concat(_this._rowClassName, \".\").concat(_this._rowKeyClassNamePrefix).concat(key);\n        var el = document.querySelectorAll(sel)[0];\n\n        if (el) {\n          el.classList.remove(_this._rowHoverClassName);\n        }\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(null);\n        }\n      });\n      selectedFeatures.forEach(function (feature) {\n        var key = (0, _kebabCase[\"default\"])(_this.props.keyFunction(feature));\n        var sel = \".\".concat(_this._rowClassName, \".\").concat(_this._rowKeyClassNamePrefix).concat(key);\n        var el = document.querySelectorAll(sel)[0];\n\n        if (el) {\n          el.classList.add(_this._rowHoverClassName);\n        }\n\n        feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapSingleClick\", function (olEvt) {\n      var _this$props3 = _this.props,\n          map = _this$props3.map,\n          selectStyle = _this$props3.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      var rowKeys = _toConsumableArray(selectedRowKeys);\n\n      selectedFeatures.forEach(function (selectedFeature) {\n        var key = _this.props.keyFunction(selectedFeature);\n\n        if (rowKeys.includes(key)) {\n          rowKeys = rowKeys.filter(function (rowKey) {\n            return rowKey !== key;\n          });\n          selectedFeature.setStyle(null);\n        } else {\n          rowKeys.push(key);\n          selectedFeature.setStyle(selectStyle);\n        }\n      });\n\n      _this.setState({\n        selectedRowKeys: rowKeys\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitVectorLayer\", function () {\n      var map = _this.props.map;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.removeLayer(_this._layer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitMapEventHandlers\", function () {\n      var _this$props4 = _this.props,\n          map = _this$props4.map,\n          selectable = _this$props4.selectable;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.un('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.un('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getColumnDefs\", function () {\n      var _this$props5 = _this.props,\n          attributeBlacklist = _this$props5.attributeBlacklist,\n          features = _this$props5.features,\n          columnDefs = _this$props5.columnDefs;\n      var columns = [];\n      var feature = features[0];\n\n      if (!(feature instanceof _Feature[\"default\"])) {\n        return columns;\n      }\n\n      var props = feature.getProperties();\n      Object.keys(props).forEach(function (key) {\n        if (attributeBlacklist.includes(key)) {\n          return;\n        }\n\n        if (props[key] instanceof _Geometry[\"default\"]) {\n          return;\n        }\n\n        columns.push(_objectSpread({\n          title: key,\n          dataIndex: key,\n          key: key\n        }, columnDefs[key]));\n      });\n      return columns;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTableData\", function () {\n      var features = _this.props.features;\n      var data = [];\n      features.forEach(function (feature) {\n        var properties = feature.getProperties();\n        var filtered = Object.keys(properties).filter(function (key) {\n          return !(properties[key] instanceof _Geometry[\"default\"]);\n        }).reduce(function (obj, key) {\n          obj[key] = properties[key];\n          return obj;\n        }, {});\n        data.push(_objectSpread({\n          key: _this.props.keyFunction(feature)\n        }, filtered));\n      });\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFeatureFromRowKey\", function (key) {\n      var _this$props6 = _this.props,\n          features = _this$props6.features,\n          keyFunction = _this$props6.keyFunction;\n      var feature = features.filter(function (feature) {\n        return keyFunction(feature) === key;\n      });\n      return feature[0];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowClick\", function (row) {\n      var onRowClick = _this.props.onRowClick;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowClick)) {\n        onRowClick(row, feature);\n      }\n\n      _this.zoomToFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOver\", function (row) {\n      var onRowMouseOver = _this.props.onRowMouseOver;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowMouseOver)) {\n        onRowMouseOver(row, feature);\n      }\n\n      _this.highlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOut\", function (row) {\n      var onRowMouseOut = _this.props.onRowMouseOut;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowMouseOut)) {\n        onRowMouseOut(row, feature);\n      }\n\n      _this.unhighlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomToFeatures\", function (features) {\n      var map = _this.props.map;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      var featGeometries = [];\n      features.forEach(function (feature) {\n        featGeometries.push(feature.getGeometry());\n      });\n\n      if (featGeometries.length > 0) {\n        var geomCollection = new _GeometryCollection[\"default\"](featGeometries);\n        map.getView().fit(geomCollection.getExtent());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightFeatures\", function (highlightFeatures) {\n      var _this$props7 = _this.props,\n          map = _this$props7.map,\n          highlightStyle = _this$props7.highlightStyle;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      highlightFeatures.forEach(function (feature) {\n        return feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unhighlightFeatures\", function (unhighlightFeatures) {\n      var _this$props8 = _this.props,\n          map = _this$props8.map,\n          selectStyle = _this$props8.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      unhighlightFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(null);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFeatures\", function (features) {\n      var _this$props9 = _this.props,\n          map = _this$props9.map,\n          selectStyle = _this$props9.selectStyle;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      features.forEach(function (feature) {\n        return feature.setStyle(selectStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetFeatureStyles\", function () {\n      var _this$props10 = _this.props,\n          map = _this$props10.map,\n          features = _this$props10.features;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      features.forEach(function (feature) {\n        return feature.setStyle(null);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (selectedRowKeys) {\n      var onRowSelectionChange = _this.props.onRowSelectionChange;\n      var selectedFeatures = selectedRowKeys.map(function (key) {\n        return _this.getFeatureFromRowKey(key);\n      });\n\n      if ((0, _isFunction[\"default\"])(onRowSelectionChange)) {\n        onRowSelectionChange(selectedRowKeys, selectedFeatures);\n      }\n\n      _this.resetFeatureStyles();\n\n      _this.selectFeatures(selectedFeatures);\n\n      _this.setState({\n        selectedRowKeys: selectedRowKeys\n      });\n    });\n\n    _this.state = {\n      selectedRowKeys: []\n    };\n    return _this;\n  }\n  /**\n   * Called on lifecycle phase componentDidMount.\n   */\n\n\n  _createClass(FeatureGrid, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props11 = this.props,\n          map = _this$props11.map,\n          features = _this$props11.features,\n          zoomToExtent = _this$props11.zoomToExtent;\n      this.initVectorLayer(map);\n      this.initMapEventHandlers(map);\n\n      if (zoomToExtent) {\n        this.zoomToFeatures(features);\n      }\n    }\n    /**\n     * Invoked immediately after updating occurs. This method is not called for\n     * the initial render.\n     *\n     * @param {Object} prevProps The previous props.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      var _this$props12 = this.props,\n          map = _this$props12.map,\n          features = _this$props12.features,\n          selectable = _this$props12.selectable,\n          zoomToExtent = _this$props12.zoomToExtent;\n\n      if (!(0, _isEqual[\"default\"])(prevProps.map, map)) {\n        this.initVectorLayer(map);\n        this.initMapEventHandlers(map);\n      }\n\n      if (!(0, _isEqual[\"default\"])(prevProps.features, features)) {\n        if (this._source) {\n          this._source.clear();\n\n          this._source.addFeatures(features);\n        }\n\n        if (zoomToExtent) {\n          this.zoomToFeatures(features);\n        }\n      }\n\n      if (!(0, _isEqual[\"default\"])(prevProps.selectable, selectable)) {\n        if (selectable && map) {\n          map.on('singleclick', this.onMapSingleClick);\n        } else {\n          this.setState({\n            selectedRowKeys: []\n          }, function () {\n            if (map) {\n              map.un('singleclick', _this2.onMapSingleClick);\n            }\n          });\n        }\n      }\n    }\n    /**\n     * Called on lifecycle phase componentWillUnmount.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.deinitVectorLayer();\n      this.deinitMapEventHandlers();\n    }\n    /**\n     * Initialized the vector layer that will be used to draw the input features\n     * on and adds it to the map (if any).\n     *\n     * @param {ol.Map} map The map to add the layer to.\n     */\n\n  }, {\n    key: \"render\",\n\n    /**\n     * The render method.\n     */\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props13 = this.props,\n          className = _this$props13.className,\n          rowClassName = _this$props13.rowClassName,\n          features = _this$props13.features,\n          map = _this$props13.map,\n          attributeBlacklist = _this$props13.attributeBlacklist,\n          onRowClick = _this$props13.onRowClick,\n          onRowMouseOver = _this$props13.onRowMouseOver,\n          onRowMouseOut = _this$props13.onRowMouseOut,\n          zoomToExtent = _this$props13.zoomToExtent,\n          selectable = _this$props13.selectable,\n          featureStyle = _this$props13.featureStyle,\n          highlightStyle = _this$props13.highlightStyle,\n          selectStyle = _this$props13.selectStyle,\n          layerName = _this$props13.layerName,\n          columnDefs = _this$props13.columnDefs,\n          children = _this$props13.children,\n          passThroughProps = _objectWithoutProperties(_this$props13, [\"className\", \"rowClassName\", \"features\", \"map\", \"attributeBlacklist\", \"onRowClick\", \"onRowMouseOver\", \"onRowMouseOut\", \"zoomToExtent\", \"selectable\", \"featureStyle\", \"highlightStyle\", \"selectStyle\", \"layerName\", \"columnDefs\", \"children\"]);\n\n      var selectedRowKeys = this.state.selectedRowKeys;\n      var rowSelection = {\n        selectedRowKeys: selectedRowKeys,\n        onChange: this.onSelectChange\n      };\n      var finalClassName = className ? \"\".concat(className, \" \").concat(this._className) : this._className;\n      var rowClassNameFn;\n\n      if ((0, _isFunction[\"default\"])(rowClassName)) {\n        rowClassNameFn = function rowClassNameFn(record) {\n          return \"\".concat(_this3._rowClassName, \" \").concat(rowClassName(record));\n        };\n      } else {\n        var finalRowClassName = rowClassName ? \"\".concat(rowClassName, \" \").concat(this._rowClassName) : this._rowClassName;\n\n        rowClassNameFn = function rowClassNameFn(record) {\n          return \"\".concat(finalRowClassName, \" \").concat(_this3._rowKeyClassNamePrefix).concat((0, _kebabCase[\"default\"])(record.key));\n        };\n      }\n\n      return _react[\"default\"].createElement(_table[\"default\"], _extends({\n        className: finalClassName,\n        columns: this.getColumnDefs(),\n        dataSource: this.getTableData(),\n        onRow: function onRow(record) {\n          return {\n            onClick: function onClick() {\n              return _this3.onRowClick(record);\n            },\n            onMouseOver: function onMouseOver() {\n              return _this3.onRowMouseOver(record);\n            },\n            onMouseOut: function onMouseOut() {\n              return _this3.onRowMouseOut(record);\n            }\n          };\n        },\n        rowClassName: rowClassNameFn,\n        rowSelection: selectable ? rowSelection : null,\n        ref: function ref(_ref) {\n          return _this3._ref = _ref;\n        }\n      }, passThroughProps), children);\n    }\n  }]);\n\n  return FeatureGrid;\n}(_react[\"default\"].Component);\n\nexports.FeatureGrid = FeatureGrid;\n\n_defineProperty(FeatureGrid, \"propTypes\", {\n  /**\n   * An optional CSS class which should be added to the table.\n   * @type {String}\n   */\n  className: _propTypes[\"default\"].string,\n\n  /**\n   * An optional CSS class to add to each table row or a function that\n   * is evaluated for each record.\n   * @type {String|Function}\n   */\n  rowClassName: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n\n  /**\n   * The features to show in the grid and the map (if set).\n   * @type {Array}\n   */\n  features: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].instanceOf(_Feature[\"default\"])),\n\n  /**\n   * The map the features should be rendered on. If not given, the features\n   * will be rendered in the table only.\n   * @type {ol.Map}\n   */\n  map: _propTypes[\"default\"].instanceOf(_Map[\"default\"]),\n\n  /**\n   * A list of attribute names to hide in the table.\n   * @type {Array}\n   */\n  attributeBlacklist: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string),\n\n  /**\n   * Optional callback function, that will be called on rowclick.\n   * @type {Function}\n   */\n  onRowClick: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called on rowmouseover.\n   * @type {Function}\n   */\n  onRowMouseOver: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called on rowmouseout.\n   * @type {Function}\n   */\n  onRowMouseOut: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called if the selection changes.\n   * @type {Function}\n   */\n  onRowSelectionChange: _propTypes[\"default\"].func,\n\n  /**\n   * Whether the map should center on the current feature's extent on init or\n   * not.\n   * @type {Boolean}\n   */\n  zoomToExtent: _propTypes[\"default\"].bool,\n\n  /**\n   * Whether rows and features should be selectable or not.\n   *\n   * @type {Boolean}\n   */\n  selectable: _propTypes[\"default\"].bool,\n\n  /**\n   * The default style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  featureStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The highlight style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  highlightStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The select style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  selectStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The name of the vector layer presenting the features in the grid.\n   * @type {String}\n   */\n  layerName: _propTypes[\"default\"].string,\n\n  /**\n   * Custom column definitions to apply to the given column (mapping via key).\n   * See https://ant.design/components/table/#Column.\n   * @type {Object}\n   */\n  columnDefs: _propTypes[\"default\"].object,\n\n  /**\n   * The children to render.\n   * @type {Element}\n   */\n  children: _propTypes[\"default\"].element,\n\n  /**\n   * A Function that creates the rowkey from the given feature.\n   * Receives the feature as property.\n   * Default is: feature => feature.ol_uid\n   *\n   * @type {Function}\n   */\n  keyFunction: _propTypes[\"default\"].func\n});\n\n_defineProperty(FeatureGrid, \"defaultProps\", {\n  features: [],\n  attributeBlacklist: [],\n  featureStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(255, 255, 255, 0.5)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(255, 255, 255, 0.5)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  highlightStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  selectStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 2\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 2\n      })\n    })\n  }),\n  layerName: 'react-geo-feature-grid-layer',\n  columnDefs: {},\n  keyFunction: function keyFunction(feature) {\n    return feature.ol_uid;\n  }\n  /**\n   * The constructor.\n   */\n\n});\n\nvar _default = FeatureGrid;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/dirkmennecke77/Desktop/Lageplan/node_modules/@terrestris/react-geo/dist/Grid/FeatureGrid/FeatureGrid.js"],"names":["Object","defineProperty","exports","value","FeatureGrid","require","_table","_interopRequireDefault","_react","_propTypes","_Style","_Fill","_Circle","_Stroke","_Map","_Feature","_Vector","_Vector2","_Geometry","_GeometryCollection","_isEqual","_isFunction","_kebabCase","_MapUtil","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_objectSpread","ownKeys","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","_defineProperty","defineProperties","getOwnPropertyDescriptors","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","TypeError","iter","toString","Array","from","isArray","arr2","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","_setPrototypeOf","p","_React$Component","_props","_this","map","_this$props","features","featureStyle","layerName","getLayerByName","layer","name","style","addLayer","_source","_layer","selectable","on","onMapPointerMove","onMapSingleClick","olEvt","_this$props2","highlightStyle","selectStyle","selectedRowKeys","state","selectedFeatures","getFeaturesAtPixel","pixel","layerFilter","layerCand","feature","keyFunction","sel","_rowClassName","_rowKeyClassNamePrefix","el","document","querySelectorAll","classList","remove","_rowHoverClassName","includes","setStyle","add","_this$props3","rowKeys","selectedFeature","rowKey","push","setState","removeLayer","_this$props4","un","_this$props5","attributeBlacklist","columnDefs","columns","getProperties","title","dataIndex","data","properties","filtered","reduce","_this$props6","row","onRowClick","getFeatureFromRowKey","zoomToFeatures","onRowMouseOver","highlightFeatures","onRowMouseOut","unhighlightFeatures","featGeometries","getGeometry","geomCollection","getView","fit","getExtent","_this$props7","_this$props8","_this$props9","_this$props10","onRowSelectionChange","resetFeatureStyles","selectFeatures","componentDidMount","_this$props11","zoomToExtent","initVectorLayer","initMapEventHandlers","componentDidUpdate","prevProps","_this2","_this$props12","clear","addFeatures","componentWillUnmount","deinitVectorLayer","deinitMapEventHandlers","render","_this3","_this$props13","className","rowClassName","children","passThroughProps","rowSelection","onChange","onSelectChange","finalClassName","_className","rowClassNameFn","record","finalRowClassName","createElement","getColumnDefs","dataSource","getTableData","onRow","onClick","onMouseOver","onMouseOut","ref","_ref","Component","string","oneOfType","func","arrayOf","instanceOf","bool","object","element","fill","color","stroke","width","image","radius","ol_uid","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.FeatureGrid = void 0;\n\nrequire(\"antd/es/table/style\");\n\nvar _table = _interopRequireDefault(require(\"antd/es/table\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _Style = _interopRequireDefault(require(\"ol/style/Style\"));\n\nvar _Fill = _interopRequireDefault(require(\"ol/style/Fill\"));\n\nvar _Circle = _interopRequireDefault(require(\"ol/style/Circle\"));\n\nvar _Stroke = _interopRequireDefault(require(\"ol/style/Stroke\"));\n\nvar _Map = _interopRequireDefault(require(\"ol/Map\"));\n\nvar _Feature = _interopRequireDefault(require(\"ol/Feature\"));\n\nvar _Vector = _interopRequireDefault(require(\"ol/source/Vector\"));\n\nvar _Vector2 = _interopRequireDefault(require(\"ol/layer/Vector\"));\n\nvar _Geometry = _interopRequireDefault(require(\"ol/geom/Geometry\"));\n\nvar _GeometryCollection = _interopRequireDefault(require(\"ol/geom/GeometryCollection\"));\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nvar _isFunction = _interopRequireDefault(require(\"lodash/isFunction\"));\n\nvar _kebabCase = _interopRequireDefault(require(\"lodash/kebabCase\"));\n\nvar _MapUtil = _interopRequireDefault(require(\"@terrestris/ol-util/dist/MapUtil/MapUtil\"));\n\nrequire(\"./FeatureGrid.less\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { if (i % 2) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } else { Object.defineProperties(target, Object.getOwnPropertyDescriptors(arguments[i])); } } return target; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * The FeatureGrid.\n *\n * @class The FeatureGrid\n * @extends React.Component\n */\nvar FeatureGrid =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FeatureGrid, _React$Component);\n\n  /**\n   * The class name to add to this component.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The class name to add to each table row.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The prefix to use for each table row class.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The hover class name.\n   * @type {String}\n   * @private\n   */\n\n  /**\n   * The source holding the features of the grid.\n   * @type {ol.source.Vector}\n   * @private\n   */\n\n  /**\n   * The layer representing the features of the grid.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n\n  /**\n   * The properties.\n   * @type {Object}\n   */\n\n  /**\n   * The default properties.\n   * @type {Object}\n   */\n  function FeatureGrid(_props) {\n    var _this;\n\n    _classCallCheck(this, FeatureGrid);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FeatureGrid).call(this, _props));\n\n    _defineProperty(_assertThisInitialized(_this), \"_className\", 'react-geo-feature-grid');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowClassName\", 'react-geo-feature-grid-row');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowKeyClassNamePrefix\", 'row-key-');\n\n    _defineProperty(_assertThisInitialized(_this), \"_rowHoverClassName\", 'row-hover');\n\n    _defineProperty(_assertThisInitialized(_this), \"_source\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layer\", null);\n\n    _defineProperty(_assertThisInitialized(_this), \"initVectorLayer\", function (map) {\n      var _this$props = _this.props,\n          features = _this$props.features,\n          featureStyle = _this$props.featureStyle,\n          layerName = _this$props.layerName;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      if (_MapUtil[\"default\"].getLayerByName(map, layerName)) {\n        return;\n      }\n\n      var source = new _Vector[\"default\"]({\n        features: features\n      });\n      var layer = new _Vector2[\"default\"]({\n        name: layerName,\n        source: source,\n        style: featureStyle\n      });\n      map.addLayer(layer);\n      _this._source = source;\n      _this._layer = layer;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"initMapEventHandlers\", function (map) {\n      var selectable = _this.props.selectable;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.on('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.on('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapPointerMove\", function (olEvt) {\n      var _this$props2 = _this.props,\n          map = _this$props2.map,\n          features = _this$props2.features,\n          highlightStyle = _this$props2.highlightStyle,\n          selectStyle = _this$props2.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n      features.forEach(function (feature) {\n        var key = (0, _kebabCase[\"default\"])(_this.props.keyFunction(feature));\n        var sel = \".\".concat(_this._rowClassName, \".\").concat(_this._rowKeyClassNamePrefix).concat(key);\n        var el = document.querySelectorAll(sel)[0];\n\n        if (el) {\n          el.classList.remove(_this._rowHoverClassName);\n        }\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(null);\n        }\n      });\n      selectedFeatures.forEach(function (feature) {\n        var key = (0, _kebabCase[\"default\"])(_this.props.keyFunction(feature));\n        var sel = \".\".concat(_this._rowClassName, \".\").concat(_this._rowKeyClassNamePrefix).concat(key);\n        var el = document.querySelectorAll(sel)[0];\n\n        if (el) {\n          el.classList.add(_this._rowHoverClassName);\n        }\n\n        feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMapSingleClick\", function (olEvt) {\n      var _this$props3 = _this.props,\n          map = _this$props3.map,\n          selectStyle = _this$props3.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n      var selectedFeatures = map.getFeaturesAtPixel(olEvt.pixel, {\n        layerFilter: function layerFilter(layerCand) {\n          return layerCand === _this._layer;\n        }\n      }) || [];\n\n      var rowKeys = _toConsumableArray(selectedRowKeys);\n\n      selectedFeatures.forEach(function (selectedFeature) {\n        var key = _this.props.keyFunction(selectedFeature);\n\n        if (rowKeys.includes(key)) {\n          rowKeys = rowKeys.filter(function (rowKey) {\n            return rowKey !== key;\n          });\n          selectedFeature.setStyle(null);\n        } else {\n          rowKeys.push(key);\n          selectedFeature.setStyle(selectStyle);\n        }\n      });\n\n      _this.setState({\n        selectedRowKeys: rowKeys\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitVectorLayer\", function () {\n      var map = _this.props.map;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.removeLayer(_this._layer);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deinitMapEventHandlers\", function () {\n      var _this$props4 = _this.props,\n          map = _this$props4.map,\n          selectable = _this$props4.selectable;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      map.un('pointermove', _this.onMapPointerMove);\n\n      if (selectable) {\n        map.un('singleclick', _this.onMapSingleClick);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getColumnDefs\", function () {\n      var _this$props5 = _this.props,\n          attributeBlacklist = _this$props5.attributeBlacklist,\n          features = _this$props5.features,\n          columnDefs = _this$props5.columnDefs;\n      var columns = [];\n      var feature = features[0];\n\n      if (!(feature instanceof _Feature[\"default\"])) {\n        return columns;\n      }\n\n      var props = feature.getProperties();\n      Object.keys(props).forEach(function (key) {\n        if (attributeBlacklist.includes(key)) {\n          return;\n        }\n\n        if (props[key] instanceof _Geometry[\"default\"]) {\n          return;\n        }\n\n        columns.push(_objectSpread({\n          title: key,\n          dataIndex: key,\n          key: key\n        }, columnDefs[key]));\n      });\n      return columns;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getTableData\", function () {\n      var features = _this.props.features;\n      var data = [];\n      features.forEach(function (feature) {\n        var properties = feature.getProperties();\n        var filtered = Object.keys(properties).filter(function (key) {\n          return !(properties[key] instanceof _Geometry[\"default\"]);\n        }).reduce(function (obj, key) {\n          obj[key] = properties[key];\n          return obj;\n        }, {});\n        data.push(_objectSpread({\n          key: _this.props.keyFunction(feature)\n        }, filtered));\n      });\n      return data;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getFeatureFromRowKey\", function (key) {\n      var _this$props6 = _this.props,\n          features = _this$props6.features,\n          keyFunction = _this$props6.keyFunction;\n      var feature = features.filter(function (feature) {\n        return keyFunction(feature) === key;\n      });\n      return feature[0];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowClick\", function (row) {\n      var onRowClick = _this.props.onRowClick;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowClick)) {\n        onRowClick(row, feature);\n      }\n\n      _this.zoomToFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOver\", function (row) {\n      var onRowMouseOver = _this.props.onRowMouseOver;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowMouseOver)) {\n        onRowMouseOver(row, feature);\n      }\n\n      _this.highlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onRowMouseOut\", function (row) {\n      var onRowMouseOut = _this.props.onRowMouseOut;\n\n      var feature = _this.getFeatureFromRowKey(row.key);\n\n      if ((0, _isFunction[\"default\"])(onRowMouseOut)) {\n        onRowMouseOut(row, feature);\n      }\n\n      _this.unhighlightFeatures([feature]);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"zoomToFeatures\", function (features) {\n      var map = _this.props.map;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      var featGeometries = [];\n      features.forEach(function (feature) {\n        featGeometries.push(feature.getGeometry());\n      });\n\n      if (featGeometries.length > 0) {\n        var geomCollection = new _GeometryCollection[\"default\"](featGeometries);\n        map.getView().fit(geomCollection.getExtent());\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"highlightFeatures\", function (highlightFeatures) {\n      var _this$props7 = _this.props,\n          map = _this$props7.map,\n          highlightStyle = _this$props7.highlightStyle;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      highlightFeatures.forEach(function (feature) {\n        return feature.setStyle(highlightStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unhighlightFeatures\", function (unhighlightFeatures) {\n      var _this$props8 = _this.props,\n          map = _this$props8.map,\n          selectStyle = _this$props8.selectStyle;\n      var selectedRowKeys = _this.state.selectedRowKeys;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      unhighlightFeatures.forEach(function (feature) {\n        var key = _this.props.keyFunction(feature);\n\n        if (selectedRowKeys.includes(key)) {\n          feature.setStyle(selectStyle);\n        } else {\n          feature.setStyle(null);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectFeatures\", function (features) {\n      var _this$props9 = _this.props,\n          map = _this$props9.map,\n          selectStyle = _this$props9.selectStyle;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      features.forEach(function (feature) {\n        return feature.setStyle(selectStyle);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resetFeatureStyles\", function () {\n      var _this$props10 = _this.props,\n          map = _this$props10.map,\n          features = _this$props10.features;\n\n      if (!(map instanceof _Map[\"default\"])) {\n        return;\n      }\n\n      features.forEach(function (feature) {\n        return feature.setStyle(null);\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onSelectChange\", function (selectedRowKeys) {\n      var onRowSelectionChange = _this.props.onRowSelectionChange;\n      var selectedFeatures = selectedRowKeys.map(function (key) {\n        return _this.getFeatureFromRowKey(key);\n      });\n\n      if ((0, _isFunction[\"default\"])(onRowSelectionChange)) {\n        onRowSelectionChange(selectedRowKeys, selectedFeatures);\n      }\n\n      _this.resetFeatureStyles();\n\n      _this.selectFeatures(selectedFeatures);\n\n      _this.setState({\n        selectedRowKeys: selectedRowKeys\n      });\n    });\n\n    _this.state = {\n      selectedRowKeys: []\n    };\n    return _this;\n  }\n  /**\n   * Called on lifecycle phase componentDidMount.\n   */\n\n\n  _createClass(FeatureGrid, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props11 = this.props,\n          map = _this$props11.map,\n          features = _this$props11.features,\n          zoomToExtent = _this$props11.zoomToExtent;\n      this.initVectorLayer(map);\n      this.initMapEventHandlers(map);\n\n      if (zoomToExtent) {\n        this.zoomToFeatures(features);\n      }\n    }\n    /**\n     * Invoked immediately after updating occurs. This method is not called for\n     * the initial render.\n     *\n     * @param {Object} prevProps The previous props.\n     */\n\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      var _this$props12 = this.props,\n          map = _this$props12.map,\n          features = _this$props12.features,\n          selectable = _this$props12.selectable,\n          zoomToExtent = _this$props12.zoomToExtent;\n\n      if (!(0, _isEqual[\"default\"])(prevProps.map, map)) {\n        this.initVectorLayer(map);\n        this.initMapEventHandlers(map);\n      }\n\n      if (!(0, _isEqual[\"default\"])(prevProps.features, features)) {\n        if (this._source) {\n          this._source.clear();\n\n          this._source.addFeatures(features);\n        }\n\n        if (zoomToExtent) {\n          this.zoomToFeatures(features);\n        }\n      }\n\n      if (!(0, _isEqual[\"default\"])(prevProps.selectable, selectable)) {\n        if (selectable && map) {\n          map.on('singleclick', this.onMapSingleClick);\n        } else {\n          this.setState({\n            selectedRowKeys: []\n          }, function () {\n            if (map) {\n              map.un('singleclick', _this2.onMapSingleClick);\n            }\n          });\n        }\n      }\n    }\n    /**\n     * Called on lifecycle phase componentWillUnmount.\n     */\n\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.deinitVectorLayer();\n      this.deinitMapEventHandlers();\n    }\n    /**\n     * Initialized the vector layer that will be used to draw the input features\n     * on and adds it to the map (if any).\n     *\n     * @param {ol.Map} map The map to add the layer to.\n     */\n\n  }, {\n    key: \"render\",\n\n    /**\n     * The render method.\n     */\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props13 = this.props,\n          className = _this$props13.className,\n          rowClassName = _this$props13.rowClassName,\n          features = _this$props13.features,\n          map = _this$props13.map,\n          attributeBlacklist = _this$props13.attributeBlacklist,\n          onRowClick = _this$props13.onRowClick,\n          onRowMouseOver = _this$props13.onRowMouseOver,\n          onRowMouseOut = _this$props13.onRowMouseOut,\n          zoomToExtent = _this$props13.zoomToExtent,\n          selectable = _this$props13.selectable,\n          featureStyle = _this$props13.featureStyle,\n          highlightStyle = _this$props13.highlightStyle,\n          selectStyle = _this$props13.selectStyle,\n          layerName = _this$props13.layerName,\n          columnDefs = _this$props13.columnDefs,\n          children = _this$props13.children,\n          passThroughProps = _objectWithoutProperties(_this$props13, [\"className\", \"rowClassName\", \"features\", \"map\", \"attributeBlacklist\", \"onRowClick\", \"onRowMouseOver\", \"onRowMouseOut\", \"zoomToExtent\", \"selectable\", \"featureStyle\", \"highlightStyle\", \"selectStyle\", \"layerName\", \"columnDefs\", \"children\"]);\n\n      var selectedRowKeys = this.state.selectedRowKeys;\n      var rowSelection = {\n        selectedRowKeys: selectedRowKeys,\n        onChange: this.onSelectChange\n      };\n      var finalClassName = className ? \"\".concat(className, \" \").concat(this._className) : this._className;\n      var rowClassNameFn;\n\n      if ((0, _isFunction[\"default\"])(rowClassName)) {\n        rowClassNameFn = function rowClassNameFn(record) {\n          return \"\".concat(_this3._rowClassName, \" \").concat(rowClassName(record));\n        };\n      } else {\n        var finalRowClassName = rowClassName ? \"\".concat(rowClassName, \" \").concat(this._rowClassName) : this._rowClassName;\n\n        rowClassNameFn = function rowClassNameFn(record) {\n          return \"\".concat(finalRowClassName, \" \").concat(_this3._rowKeyClassNamePrefix).concat((0, _kebabCase[\"default\"])(record.key));\n        };\n      }\n\n      return _react[\"default\"].createElement(_table[\"default\"], _extends({\n        className: finalClassName,\n        columns: this.getColumnDefs(),\n        dataSource: this.getTableData(),\n        onRow: function onRow(record) {\n          return {\n            onClick: function onClick() {\n              return _this3.onRowClick(record);\n            },\n            onMouseOver: function onMouseOver() {\n              return _this3.onRowMouseOver(record);\n            },\n            onMouseOut: function onMouseOut() {\n              return _this3.onRowMouseOut(record);\n            }\n          };\n        },\n        rowClassName: rowClassNameFn,\n        rowSelection: selectable ? rowSelection : null,\n        ref: function ref(_ref) {\n          return _this3._ref = _ref;\n        }\n      }, passThroughProps), children);\n    }\n  }]);\n\n  return FeatureGrid;\n}(_react[\"default\"].Component);\n\nexports.FeatureGrid = FeatureGrid;\n\n_defineProperty(FeatureGrid, \"propTypes\", {\n  /**\n   * An optional CSS class which should be added to the table.\n   * @type {String}\n   */\n  className: _propTypes[\"default\"].string,\n\n  /**\n   * An optional CSS class to add to each table row or a function that\n   * is evaluated for each record.\n   * @type {String|Function}\n   */\n  rowClassName: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].func]),\n\n  /**\n   * The features to show in the grid and the map (if set).\n   * @type {Array}\n   */\n  features: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].instanceOf(_Feature[\"default\"])),\n\n  /**\n   * The map the features should be rendered on. If not given, the features\n   * will be rendered in the table only.\n   * @type {ol.Map}\n   */\n  map: _propTypes[\"default\"].instanceOf(_Map[\"default\"]),\n\n  /**\n   * A list of attribute names to hide in the table.\n   * @type {Array}\n   */\n  attributeBlacklist: _propTypes[\"default\"].arrayOf(_propTypes[\"default\"].string),\n\n  /**\n   * Optional callback function, that will be called on rowclick.\n   * @type {Function}\n   */\n  onRowClick: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called on rowmouseover.\n   * @type {Function}\n   */\n  onRowMouseOver: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called on rowmouseout.\n   * @type {Function}\n   */\n  onRowMouseOut: _propTypes[\"default\"].func,\n\n  /**\n   * Optional callback function, that will be called if the selection changes.\n   * @type {Function}\n   */\n  onRowSelectionChange: _propTypes[\"default\"].func,\n\n  /**\n   * Whether the map should center on the current feature's extent on init or\n   * not.\n   * @type {Boolean}\n   */\n  zoomToExtent: _propTypes[\"default\"].bool,\n\n  /**\n   * Whether rows and features should be selectable or not.\n   *\n   * @type {Boolean}\n   */\n  selectable: _propTypes[\"default\"].bool,\n\n  /**\n   * The default style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  featureStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The highlight style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  highlightStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The select style to apply to the features.\n   * @type {ol.Style|ol.FeatureStyleFunction}\n   */\n  selectStyle: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].instanceOf(_Style[\"default\"]), _propTypes[\"default\"].func]),\n\n  /**\n   * The name of the vector layer presenting the features in the grid.\n   * @type {String}\n   */\n  layerName: _propTypes[\"default\"].string,\n\n  /**\n   * Custom column definitions to apply to the given column (mapping via key).\n   * See https://ant.design/components/table/#Column.\n   * @type {Object}\n   */\n  columnDefs: _propTypes[\"default\"].object,\n\n  /**\n   * The children to render.\n   * @type {Element}\n   */\n  children: _propTypes[\"default\"].element,\n\n  /**\n   * A Function that creates the rowkey from the given feature.\n   * Receives the feature as property.\n   * Default is: feature => feature.ol_uid\n   *\n   * @type {Function}\n   */\n  keyFunction: _propTypes[\"default\"].func\n});\n\n_defineProperty(FeatureGrid, \"defaultProps\", {\n  features: [],\n  attributeBlacklist: [],\n  featureStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(255, 255, 255, 0.5)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(255, 255, 255, 0.5)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  highlightStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 1\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 1\n      })\n    })\n  }),\n  selectStyle: new _Style[\"default\"]({\n    fill: new _Fill[\"default\"]({\n      color: 'rgba(230, 247, 255, 0.8)'\n    }),\n    stroke: new _Stroke[\"default\"]({\n      color: 'rgba(73, 139, 170, 0.9)',\n      width: 2\n    }),\n    image: new _Circle[\"default\"]({\n      radius: 6,\n      fill: new _Fill[\"default\"]({\n        color: 'rgba(230, 247, 255, 0.8)'\n      }),\n      stroke: new _Stroke[\"default\"]({\n        color: 'rgba(73, 139, 170, 0.9)',\n        width: 2\n      })\n    })\n  }),\n  layerName: 'react-geo-feature-grid-layer',\n  columnDefs: {},\n  keyFunction: function keyFunction(feature) {\n    return feature.ol_uid;\n  }\n  /**\n   * The constructor.\n   */\n\n});\n\nvar _default = FeatureGrid;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}