{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar logger_1 = require(\"../logger\");\n\nvar context_1 = require(\"../context/context\");\n\nvar gridOptionsWrapper_1 = require(\"../gridOptionsWrapper\");\n\nvar dragService_1 = require(\"./dragService\");\n\nvar columnController_1 = require(\"../columnController/columnController\");\n\nvar environment_1 = require(\"../environment\");\n\nvar utils_1 = require(\"../utils\");\n\nvar DragSourceType;\n\n(function (DragSourceType) {\n  DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n  DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n  DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n})(DragSourceType = exports.DragSourceType || (exports.DragSourceType = {}));\n\nvar VDirection;\n\n(function (VDirection) {\n  VDirection[VDirection[\"Up\"] = 0] = \"Up\";\n  VDirection[VDirection[\"Down\"] = 1] = \"Down\";\n})(VDirection = exports.VDirection || (exports.VDirection = {}));\n\nvar HDirection;\n\n(function (HDirection) {\n  HDirection[HDirection[\"Left\"] = 0] = \"Left\";\n  HDirection[HDirection[\"Right\"] = 1] = \"Right\";\n})(HDirection = exports.HDirection || (exports.HDirection = {}));\n\nvar DragAndDropService =\n/** @class */\nfunction () {\n  function DragAndDropService() {\n    this.dragSourceAndParamsList = [];\n    this.dropTargets = [];\n  }\n\n  DragAndDropService_1 = DragAndDropService;\n\n  DragAndDropService.prototype.init = function () {\n    this.ePinnedIcon = utils_1._.createIcon('columnMovePin', this.gridOptionsWrapper, null);\n    this.ePlusIcon = utils_1._.createIcon('columnMoveAdd', this.gridOptionsWrapper, null);\n    this.eHiddenIcon = utils_1._.createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n    this.eMoveIcon = utils_1._.createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n    this.eLeftIcon = utils_1._.createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n    this.eRightIcon = utils_1._.createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n    this.eGroupIcon = utils_1._.createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n    this.eAggregateIcon = utils_1._.createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n    this.ePivotIcon = utils_1._.createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n    this.eDropNotAllowedIcon = utils_1._.createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n  };\n\n  DragAndDropService.prototype.setBeans = function (loggerFactory) {\n    this.logger = loggerFactory.create('OldToolPanelDragAndDropService');\n  };\n\n  DragAndDropService.prototype.getStringType = function (type) {\n    switch (type) {\n      case DragSourceType.RowDrag:\n        return 'row';\n\n      case DragSourceType.HeaderCell:\n        return 'headerCell';\n\n      case DragSourceType.ToolPanel:\n        return 'toolPanel';\n\n      default:\n        console.warn(\"ag-Grid: bug - unknown drag type \" + type);\n        return null;\n    }\n  };\n\n  DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n    if (allowTouch === void 0) {\n      allowTouch = false;\n    }\n\n    var params = {\n      eElement: dragSource.eElement,\n      dragStartPixels: dragSource.dragStartPixels,\n      onDragStart: this.onDragStart.bind(this, dragSource),\n      onDragStop: this.onDragStop.bind(this),\n      onDragging: this.onDragging.bind(this)\n    };\n    this.dragSourceAndParamsList.push({\n      params: params,\n      dragSource: dragSource\n    });\n    this.dragService.addDragSource(params, allowTouch);\n  };\n\n  DragAndDropService.prototype.removeDragSource = function (dragSource) {\n    var sourceAndParams = utils_1._.find(this.dragSourceAndParamsList, function (item) {\n      return item.dragSource === dragSource;\n    });\n\n    if (sourceAndParams) {\n      this.dragService.removeDragSource(sourceAndParams.params);\n\n      utils_1._.removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n    }\n  };\n\n  DragAndDropService.prototype.destroy = function () {\n    var _this = this;\n\n    this.dragSourceAndParamsList.forEach(function (sourceAndParams) {\n      _this.dragService.removeDragSource(sourceAndParams.params);\n    });\n    this.dragSourceAndParamsList.length = 0;\n  };\n\n  DragAndDropService.prototype.nudge = function () {\n    if (this.dragging) {\n      this.onDragging(this.eventLastTime, true);\n    }\n  };\n\n  DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n    this.dragging = true;\n    this.dragSource = dragSource;\n    this.eventLastTime = mouseEvent;\n    this.dragItem = this.dragSource.dragItemCallback();\n    this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n\n    if (this.dragSource.dragStarted) {\n      this.dragSource.dragStarted();\n    }\n\n    this.createGhost();\n  };\n\n  DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n    this.eventLastTime = null;\n    this.dragging = false;\n\n    if (this.dragSource.dragStopped) {\n      this.dragSource.dragStopped();\n    }\n\n    if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n      var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n      this.lastDropTarget.onDragStop(draggingEvent);\n    }\n\n    this.lastDropTarget = null;\n    this.dragItem = null;\n    this.removeGhost();\n  };\n\n  DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n    var hDirection = this.workOutHDirection(mouseEvent);\n    var vDirection = this.workOutVDirection(mouseEvent);\n    this.eventLastTime = mouseEvent;\n    this.positionGhost(mouseEvent); // check if mouseEvent intersects with any of the drop targets\n\n    var dropTarget = utils_1._.find(this.dropTargets, this.isMouseOnDropTarget.bind(this, mouseEvent));\n\n    if (dropTarget !== this.lastDropTarget) {\n      this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n      this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      this.lastDropTarget = dropTarget;\n    } else if (dropTarget) {\n      var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n      dropTarget.onDragging(draggingEvent);\n    }\n  };\n\n  DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!dropTarget) {\n      return;\n    }\n\n    var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n    dropTarget.onDragEnter(dragEnterEvent);\n    this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n  };\n\n  DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n    if (!this.lastDropTarget) {\n      return;\n    }\n\n    var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n    this.lastDropTarget.onDragLeave(dragLeaveEvent);\n    this.setGhostIcon(null);\n  };\n\n  DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n    var containers = [dropTarget.getContainer()];\n    var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n\n    if (secondaryContainers) {\n      containers = containers.concat(secondaryContainers);\n    }\n\n    return containers;\n  }; // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n\n\n  DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n    var allContainers = this.getAllContainersFromDropTarget(dropTarget);\n    var mouseOverTarget = false;\n    allContainers.forEach(function (eContainer) {\n      if (!eContainer) {\n        return;\n      } // secondary can be missing\n\n\n      var rect = eContainer.getBoundingClientRect(); // if element is not visible, then width and height are zero\n\n      if (rect.width === 0 || rect.height === 0) {\n        return;\n      }\n\n      var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX <= rect.right;\n      var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY <= rect.bottom; //console.log(`rect.width = ${rect.width} || rect.height = ${rect.height} ## verticalFit = ${verticalFit}, horizontalFit = ${horizontalFit}, `);\n\n      if (horizontalFit && verticalFit) {\n        mouseOverTarget = true;\n      }\n    });\n\n    if (mouseOverTarget) {\n      var mouseOverTargetAndInterested = dropTarget.isInterestedIn(this.dragSource.type);\n      return mouseOverTargetAndInterested;\n    } else {\n      return false;\n    }\n  };\n\n  DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n    this.dropTargets.push(dropTarget);\n  };\n\n  DragAndDropService.prototype.workOutHDirection = function (event) {\n    if (this.eventLastTime.clientX > event.clientX) {\n      return HDirection.Left;\n    } else if (this.eventLastTime.clientX < event.clientX) {\n      return HDirection.Right;\n    } else {\n      return null;\n    }\n  };\n\n  DragAndDropService.prototype.workOutVDirection = function (event) {\n    if (this.eventLastTime.clientY > event.clientY) {\n      return VDirection.Up;\n    } else if (this.eventLastTime.clientY < event.clientY) {\n      return VDirection.Down;\n    } else {\n      return null;\n    }\n  };\n\n  DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n    // localise x and y to the target component\n    var rect = dropTarget.getContainer().getBoundingClientRect();\n    var x = event.clientX - rect.left;\n    var y = event.clientY - rect.top;\n    var dropTargetEvent = {\n      event: event,\n      x: x,\n      y: y,\n      vDirection: vDirection,\n      hDirection: hDirection,\n      dragSource: this.dragSource,\n      fromNudge: fromNudge,\n      dragItem: this.dragItem\n    };\n    return dropTargetEvent;\n  };\n\n  DragAndDropService.prototype.positionGhost = function (event) {\n    var ghostRect = this.eGhost.getBoundingClientRect();\n    var ghostHeight = ghostRect.height; // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n    // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n    // works around it which is good enough for me.\n\n    var browserWidth = utils_1._.getBodyWidth() - 2;\n    var browserHeight = utils_1._.getBodyHeight() - 2; // put ghost vertically in middle of cursor\n\n    var top = event.pageY - ghostHeight / 2; // horizontally, place cursor just right of icon\n\n    var left = event.pageX - 30;\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n    var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft; // check ghost is not positioned outside of the browser\n\n    if (browserWidth > 0) {\n      if (left + this.eGhost.clientWidth > browserWidth + windowScrollX) {\n        left = browserWidth + windowScrollX - this.eGhost.clientWidth;\n      }\n    }\n\n    if (left < 0) {\n      left = 0;\n    }\n\n    if (browserHeight > 0) {\n      if (top + this.eGhost.clientHeight > browserHeight + windowScrollY) {\n        top = browserHeight + windowScrollY - this.eGhost.clientHeight;\n      }\n    }\n\n    if (top < 0) {\n      top = 0;\n    }\n\n    this.eGhost.style.left = left + 'px';\n    this.eGhost.style.top = top + 'px';\n  };\n\n  DragAndDropService.prototype.removeGhost = function () {\n    if (this.eGhost && this.eGhostParent) {\n      this.eGhostParent.removeChild(this.eGhost);\n    }\n\n    this.eGhost = null;\n  };\n\n  DragAndDropService.prototype.createGhost = function () {\n    this.eGhost = utils_1._.loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n    var theme = this.environment.getTheme().theme;\n\n    if (theme) {\n      utils_1._.addCssClass(this.eGhost, theme);\n    }\n\n    this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n    this.setGhostIcon(null);\n    var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n    eText.innerHTML = utils_1._.escape(this.dragSource.dragItemName);\n    this.eGhost.style.height = '25px';\n    this.eGhost.style.top = '20px';\n    this.eGhost.style.left = '20px';\n    var usrDocument = this.gridOptionsWrapper.getDocument();\n    this.eGhostParent = usrDocument.querySelector('body');\n\n    if (!this.eGhostParent) {\n      console.warn('ag-Grid: could not find document body, it is needed for dragging columns');\n    } else {\n      this.eGhostParent.appendChild(this.eGhost);\n    }\n  };\n\n  DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n    if (shake === void 0) {\n      shake = false;\n    }\n\n    utils_1._.clearElement(this.eGhostIcon);\n\n    var eIcon;\n\n    switch (iconName) {\n      case DragAndDropService_1.ICON_ADD:\n        eIcon = this.ePlusIcon;\n        break;\n\n      case DragAndDropService_1.ICON_PINNED:\n        eIcon = this.ePinnedIcon;\n        break;\n\n      case DragAndDropService_1.ICON_MOVE:\n        eIcon = this.eMoveIcon;\n        break;\n\n      case DragAndDropService_1.ICON_LEFT:\n        eIcon = this.eLeftIcon;\n        break;\n\n      case DragAndDropService_1.ICON_RIGHT:\n        eIcon = this.eRightIcon;\n        break;\n\n      case DragAndDropService_1.ICON_GROUP:\n        eIcon = this.eGroupIcon;\n        break;\n\n      case DragAndDropService_1.ICON_AGGREGATE:\n        eIcon = this.eAggregateIcon;\n        break;\n\n      case DragAndDropService_1.ICON_PIVOT:\n        eIcon = this.ePivotIcon;\n        break;\n\n      case DragAndDropService_1.ICON_NOT_ALLOWED:\n        eIcon = this.eDropNotAllowedIcon;\n        break;\n\n      default:\n        eIcon = this.eHiddenIcon;\n        break;\n    }\n\n    this.eGhostIcon.appendChild(eIcon);\n\n    utils_1._.addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n  };\n\n  var DragAndDropService_1;\n  DragAndDropService.ICON_PINNED = 'pinned';\n  DragAndDropService.ICON_ADD = 'add';\n  DragAndDropService.ICON_MOVE = 'move';\n  DragAndDropService.ICON_LEFT = 'left';\n  DragAndDropService.ICON_RIGHT = 'right';\n  DragAndDropService.ICON_GROUP = 'group';\n  DragAndDropService.ICON_AGGREGATE = 'aggregate';\n  DragAndDropService.ICON_PIVOT = 'pivot';\n  DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n  DragAndDropService.GHOST_TEMPLATE = '<div class=\"ag-dnd-ghost\">' + '  <span class=\"ag-dnd-ghost-icon ag-shake-left-to-right\"></span>' + '  <div class=\"ag-dnd-ghost-label\">' + '  </div>' + '</div>';\n\n  __decorate([context_1.Autowired('gridOptionsWrapper'), __metadata(\"design:type\", gridOptionsWrapper_1.GridOptionsWrapper)], DragAndDropService.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([context_1.Autowired('dragService'), __metadata(\"design:type\", dragService_1.DragService)], DragAndDropService.prototype, \"dragService\", void 0);\n\n  __decorate([context_1.Autowired('environment'), __metadata(\"design:type\", environment_1.Environment)], DragAndDropService.prototype, \"environment\", void 0);\n\n  __decorate([context_1.Autowired('columnController'), __metadata(\"design:type\", columnController_1.ColumnController)], DragAndDropService.prototype, \"columnController\", void 0);\n\n  __decorate([context_1.PostConstruct, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], DragAndDropService.prototype, \"init\", null);\n\n  __decorate([__param(0, context_1.Qualifier('loggerFactory')), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [logger_1.LoggerFactory]), __metadata(\"design:returntype\", void 0)], DragAndDropService.prototype, \"setBeans\", null);\n\n  __decorate([context_1.PreDestroy, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], DragAndDropService.prototype, \"destroy\", null);\n\n  DragAndDropService = DragAndDropService_1 = __decorate([context_1.Bean('dragAndDropService')], DragAndDropService);\n  return DragAndDropService;\n}();\n\nexports.DragAndDropService = DragAndDropService;","map":{"version":3,"sources":["/Users/dirkmennecke77/Desktop/Lageplan/node_modules/ag-grid-community/dist/lib/dragAndDrop/dragAndDropService.js"],"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","__param","paramIndex","decorator","exports","value","logger_1","require","context_1","gridOptionsWrapper_1","dragService_1","columnController_1","environment_1","utils_1","DragSourceType","VDirection","HDirection","DragAndDropService","dragSourceAndParamsList","dropTargets","DragAndDropService_1","prototype","init","ePinnedIcon","_","createIcon","gridOptionsWrapper","ePlusIcon","eHiddenIcon","eMoveIcon","eLeftIcon","eRightIcon","eGroupIcon","eAggregateIcon","ePivotIcon","eDropNotAllowedIcon","setBeans","loggerFactory","logger","create","getStringType","type","RowDrag","HeaderCell","ToolPanel","console","warn","addDragSource","dragSource","allowTouch","params","eElement","dragStartPixels","onDragStart","bind","onDragStop","onDragging","push","dragService","removeDragSource","sourceAndParams","find","item","removeFromArray","destroy","_this","forEach","nudge","dragging","eventLastTime","mouseEvent","dragItem","dragItemCallback","lastDropTarget","dragSourceDropTarget","dragStarted","createGhost","dragStopped","draggingEvent","createDropTargetEvent","removeGhost","fromNudge","hDirection","workOutHDirection","vDirection","workOutVDirection","positionGhost","dropTarget","isMouseOnDropTarget","leaveLastTargetIfExists","enterDragTargetIfExists","dragEnterEvent","onDragEnter","setGhostIcon","getIconName","dragLeaveEvent","onDragLeave","getAllContainersFromDropTarget","containers","getContainer","secondaryContainers","getSecondaryContainers","concat","allContainers","mouseOverTarget","eContainer","rect","getBoundingClientRect","width","height","horizontalFit","clientX","left","right","verticalFit","clientY","top","bottom","mouseOverTargetAndInterested","isInterestedIn","addDropTarget","event","Left","Right","Up","Down","x","y","dropTargetEvent","ghostRect","eGhost","ghostHeight","browserWidth","getBodyWidth","browserHeight","getBodyHeight","pageY","pageX","usrDocument","getDocument","windowScrollY","window","pageYOffset","documentElement","scrollTop","windowScrollX","pageXOffset","scrollLeft","clientWidth","clientHeight","style","eGhostParent","removeChild","loadTemplate","GHOST_TEMPLATE","theme","environment","getTheme","addCssClass","eGhostIcon","querySelector","eText","innerHTML","escape","dragItemName","appendChild","iconName","shake","clearElement","eIcon","ICON_ADD","ICON_PINNED","ICON_MOVE","ICON_LEFT","ICON_RIGHT","ICON_GROUP","ICON_AGGREGATE","ICON_PIVOT","ICON_NOT_ALLOWED","addOrRemoveCssClass","Autowired","GridOptionsWrapper","DragService","Environment","ColumnController","PostConstruct","Function","Qualifier","LoggerFactory","PreDestroy","Bean"],"mappings":"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","sourcesContent":["/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"../logger\");\nvar context_1 = require(\"../context/context\");\nvar gridOptionsWrapper_1 = require(\"../gridOptionsWrapper\");\nvar dragService_1 = require(\"./dragService\");\nvar columnController_1 = require(\"../columnController/columnController\");\nvar environment_1 = require(\"../environment\");\nvar utils_1 = require(\"../utils\");\nvar DragSourceType;\n(function (DragSourceType) {\n    DragSourceType[DragSourceType[\"ToolPanel\"] = 0] = \"ToolPanel\";\n    DragSourceType[DragSourceType[\"HeaderCell\"] = 1] = \"HeaderCell\";\n    DragSourceType[DragSourceType[\"RowDrag\"] = 2] = \"RowDrag\";\n})(DragSourceType = exports.DragSourceType || (exports.DragSourceType = {}));\nvar VDirection;\n(function (VDirection) {\n    VDirection[VDirection[\"Up\"] = 0] = \"Up\";\n    VDirection[VDirection[\"Down\"] = 1] = \"Down\";\n})(VDirection = exports.VDirection || (exports.VDirection = {}));\nvar HDirection;\n(function (HDirection) {\n    HDirection[HDirection[\"Left\"] = 0] = \"Left\";\n    HDirection[HDirection[\"Right\"] = 1] = \"Right\";\n})(HDirection = exports.HDirection || (exports.HDirection = {}));\nvar DragAndDropService = /** @class */ (function () {\n    function DragAndDropService() {\n        this.dragSourceAndParamsList = [];\n        this.dropTargets = [];\n    }\n    DragAndDropService_1 = DragAndDropService;\n    DragAndDropService.prototype.init = function () {\n        this.ePinnedIcon = utils_1._.createIcon('columnMovePin', this.gridOptionsWrapper, null);\n        this.ePlusIcon = utils_1._.createIcon('columnMoveAdd', this.gridOptionsWrapper, null);\n        this.eHiddenIcon = utils_1._.createIcon('columnMoveHide', this.gridOptionsWrapper, null);\n        this.eMoveIcon = utils_1._.createIcon('columnMoveMove', this.gridOptionsWrapper, null);\n        this.eLeftIcon = utils_1._.createIcon('columnMoveLeft', this.gridOptionsWrapper, null);\n        this.eRightIcon = utils_1._.createIcon('columnMoveRight', this.gridOptionsWrapper, null);\n        this.eGroupIcon = utils_1._.createIcon('columnMoveGroup', this.gridOptionsWrapper, null);\n        this.eAggregateIcon = utils_1._.createIcon('columnMoveValue', this.gridOptionsWrapper, null);\n        this.ePivotIcon = utils_1._.createIcon('columnMovePivot', this.gridOptionsWrapper, null);\n        this.eDropNotAllowedIcon = utils_1._.createIcon('dropNotAllowed', this.gridOptionsWrapper, null);\n    };\n    DragAndDropService.prototype.setBeans = function (loggerFactory) {\n        this.logger = loggerFactory.create('OldToolPanelDragAndDropService');\n    };\n    DragAndDropService.prototype.getStringType = function (type) {\n        switch (type) {\n            case DragSourceType.RowDrag: return 'row';\n            case DragSourceType.HeaderCell: return 'headerCell';\n            case DragSourceType.ToolPanel: return 'toolPanel';\n            default:\n                console.warn(\"ag-Grid: bug - unknown drag type \" + type);\n                return null;\n        }\n    };\n    DragAndDropService.prototype.addDragSource = function (dragSource, allowTouch) {\n        if (allowTouch === void 0) { allowTouch = false; }\n        var params = {\n            eElement: dragSource.eElement,\n            dragStartPixels: dragSource.dragStartPixels,\n            onDragStart: this.onDragStart.bind(this, dragSource),\n            onDragStop: this.onDragStop.bind(this),\n            onDragging: this.onDragging.bind(this)\n        };\n        this.dragSourceAndParamsList.push({ params: params, dragSource: dragSource });\n        this.dragService.addDragSource(params, allowTouch);\n    };\n    DragAndDropService.prototype.removeDragSource = function (dragSource) {\n        var sourceAndParams = utils_1._.find(this.dragSourceAndParamsList, function (item) { return item.dragSource === dragSource; });\n        if (sourceAndParams) {\n            this.dragService.removeDragSource(sourceAndParams.params);\n            utils_1._.removeFromArray(this.dragSourceAndParamsList, sourceAndParams);\n        }\n    };\n    DragAndDropService.prototype.destroy = function () {\n        var _this = this;\n        this.dragSourceAndParamsList.forEach(function (sourceAndParams) {\n            _this.dragService.removeDragSource(sourceAndParams.params);\n        });\n        this.dragSourceAndParamsList.length = 0;\n    };\n    DragAndDropService.prototype.nudge = function () {\n        if (this.dragging) {\n            this.onDragging(this.eventLastTime, true);\n        }\n    };\n    DragAndDropService.prototype.onDragStart = function (dragSource, mouseEvent) {\n        this.dragging = true;\n        this.dragSource = dragSource;\n        this.eventLastTime = mouseEvent;\n        this.dragItem = this.dragSource.dragItemCallback();\n        this.lastDropTarget = this.dragSource.dragSourceDropTarget;\n        if (this.dragSource.dragStarted) {\n            this.dragSource.dragStarted();\n        }\n        this.createGhost();\n    };\n    DragAndDropService.prototype.onDragStop = function (mouseEvent) {\n        this.eventLastTime = null;\n        this.dragging = false;\n        if (this.dragSource.dragStopped) {\n            this.dragSource.dragStopped();\n        }\n        if (this.lastDropTarget && this.lastDropTarget.onDragStop) {\n            var draggingEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, null, null, false);\n            this.lastDropTarget.onDragStop(draggingEvent);\n        }\n        this.lastDropTarget = null;\n        this.dragItem = null;\n        this.removeGhost();\n    };\n    DragAndDropService.prototype.onDragging = function (mouseEvent, fromNudge) {\n        var hDirection = this.workOutHDirection(mouseEvent);\n        var vDirection = this.workOutVDirection(mouseEvent);\n        this.eventLastTime = mouseEvent;\n        this.positionGhost(mouseEvent);\n        // check if mouseEvent intersects with any of the drop targets\n        var dropTarget = utils_1._.find(this.dropTargets, this.isMouseOnDropTarget.bind(this, mouseEvent));\n        if (dropTarget !== this.lastDropTarget) {\n            this.leaveLastTargetIfExists(mouseEvent, hDirection, vDirection, fromNudge);\n            this.enterDragTargetIfExists(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            this.lastDropTarget = dropTarget;\n        }\n        else if (dropTarget) {\n            var draggingEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n            dropTarget.onDragging(draggingEvent);\n        }\n    };\n    DragAndDropService.prototype.enterDragTargetIfExists = function (dropTarget, mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!dropTarget) {\n            return;\n        }\n        var dragEnterEvent = this.createDropTargetEvent(dropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n        dropTarget.onDragEnter(dragEnterEvent);\n        this.setGhostIcon(dropTarget.getIconName ? dropTarget.getIconName() : null);\n    };\n    DragAndDropService.prototype.leaveLastTargetIfExists = function (mouseEvent, hDirection, vDirection, fromNudge) {\n        if (!this.lastDropTarget) {\n            return;\n        }\n        var dragLeaveEvent = this.createDropTargetEvent(this.lastDropTarget, mouseEvent, hDirection, vDirection, fromNudge);\n        this.lastDropTarget.onDragLeave(dragLeaveEvent);\n        this.setGhostIcon(null);\n    };\n    DragAndDropService.prototype.getAllContainersFromDropTarget = function (dropTarget) {\n        var containers = [dropTarget.getContainer()];\n        var secondaryContainers = dropTarget.getSecondaryContainers ? dropTarget.getSecondaryContainers() : null;\n        if (secondaryContainers) {\n            containers = containers.concat(secondaryContainers);\n        }\n        return containers;\n    };\n    // checks if the mouse is on the drop target. it checks eContainer and eSecondaryContainers\n    DragAndDropService.prototype.isMouseOnDropTarget = function (mouseEvent, dropTarget) {\n        var allContainers = this.getAllContainersFromDropTarget(dropTarget);\n        var mouseOverTarget = false;\n        allContainers.forEach(function (eContainer) {\n            if (!eContainer) {\n                return;\n            } // secondary can be missing\n            var rect = eContainer.getBoundingClientRect();\n            // if element is not visible, then width and height are zero\n            if (rect.width === 0 || rect.height === 0) {\n                return;\n            }\n            var horizontalFit = mouseEvent.clientX >= rect.left && mouseEvent.clientX <= rect.right;\n            var verticalFit = mouseEvent.clientY >= rect.top && mouseEvent.clientY <= rect.bottom;\n            //console.log(`rect.width = ${rect.width} || rect.height = ${rect.height} ## verticalFit = ${verticalFit}, horizontalFit = ${horizontalFit}, `);\n            if (horizontalFit && verticalFit) {\n                mouseOverTarget = true;\n            }\n        });\n        if (mouseOverTarget) {\n            var mouseOverTargetAndInterested = dropTarget.isInterestedIn(this.dragSource.type);\n            return mouseOverTargetAndInterested;\n        }\n        else {\n            return false;\n        }\n    };\n    DragAndDropService.prototype.addDropTarget = function (dropTarget) {\n        this.dropTargets.push(dropTarget);\n    };\n    DragAndDropService.prototype.workOutHDirection = function (event) {\n        if (this.eventLastTime.clientX > event.clientX) {\n            return HDirection.Left;\n        }\n        else if (this.eventLastTime.clientX < event.clientX) {\n            return HDirection.Right;\n        }\n        else {\n            return null;\n        }\n    };\n    DragAndDropService.prototype.workOutVDirection = function (event) {\n        if (this.eventLastTime.clientY > event.clientY) {\n            return VDirection.Up;\n        }\n        else if (this.eventLastTime.clientY < event.clientY) {\n            return VDirection.Down;\n        }\n        else {\n            return null;\n        }\n    };\n    DragAndDropService.prototype.createDropTargetEvent = function (dropTarget, event, hDirection, vDirection, fromNudge) {\n        // localise x and y to the target component\n        var rect = dropTarget.getContainer().getBoundingClientRect();\n        var x = event.clientX - rect.left;\n        var y = event.clientY - rect.top;\n        var dropTargetEvent = {\n            event: event,\n            x: x,\n            y: y,\n            vDirection: vDirection,\n            hDirection: hDirection,\n            dragSource: this.dragSource,\n            fromNudge: fromNudge,\n            dragItem: this.dragItem\n        };\n        return dropTargetEvent;\n    };\n    DragAndDropService.prototype.positionGhost = function (event) {\n        var ghostRect = this.eGhost.getBoundingClientRect();\n        var ghostHeight = ghostRect.height;\n        // for some reason, without the '-2', it still overlapped by 1 or 2 pixels, which\n        // then brought in scrollbars to the browser. no idea why, but putting in -2 here\n        // works around it which is good enough for me.\n        var browserWidth = utils_1._.getBodyWidth() - 2;\n        var browserHeight = utils_1._.getBodyHeight() - 2;\n        // put ghost vertically in middle of cursor\n        var top = event.pageY - (ghostHeight / 2);\n        // horizontally, place cursor just right of icon\n        var left = event.pageX - 30;\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        var windowScrollY = window.pageYOffset || usrDocument.documentElement.scrollTop;\n        var windowScrollX = window.pageXOffset || usrDocument.documentElement.scrollLeft;\n        // check ghost is not positioned outside of the browser\n        if (browserWidth > 0) {\n            if ((left + this.eGhost.clientWidth) > (browserWidth + windowScrollX)) {\n                left = browserWidth + windowScrollX - this.eGhost.clientWidth;\n            }\n        }\n        if (left < 0) {\n            left = 0;\n        }\n        if (browserHeight > 0) {\n            if ((top + this.eGhost.clientHeight) > (browserHeight + windowScrollY)) {\n                top = browserHeight + windowScrollY - this.eGhost.clientHeight;\n            }\n        }\n        if (top < 0) {\n            top = 0;\n        }\n        this.eGhost.style.left = left + 'px';\n        this.eGhost.style.top = top + 'px';\n    };\n    DragAndDropService.prototype.removeGhost = function () {\n        if (this.eGhost && this.eGhostParent) {\n            this.eGhostParent.removeChild(this.eGhost);\n        }\n        this.eGhost = null;\n    };\n    DragAndDropService.prototype.createGhost = function () {\n        this.eGhost = utils_1._.loadTemplate(DragAndDropService_1.GHOST_TEMPLATE);\n        var theme = this.environment.getTheme().theme;\n        if (theme) {\n            utils_1._.addCssClass(this.eGhost, theme);\n        }\n        this.eGhostIcon = this.eGhost.querySelector('.ag-dnd-ghost-icon');\n        this.setGhostIcon(null);\n        var eText = this.eGhost.querySelector('.ag-dnd-ghost-label');\n        eText.innerHTML = utils_1._.escape(this.dragSource.dragItemName);\n        this.eGhost.style.height = '25px';\n        this.eGhost.style.top = '20px';\n        this.eGhost.style.left = '20px';\n        var usrDocument = this.gridOptionsWrapper.getDocument();\n        this.eGhostParent = usrDocument.querySelector('body');\n        if (!this.eGhostParent) {\n            console.warn('ag-Grid: could not find document body, it is needed for dragging columns');\n        }\n        else {\n            this.eGhostParent.appendChild(this.eGhost);\n        }\n    };\n    DragAndDropService.prototype.setGhostIcon = function (iconName, shake) {\n        if (shake === void 0) { shake = false; }\n        utils_1._.clearElement(this.eGhostIcon);\n        var eIcon;\n        switch (iconName) {\n            case DragAndDropService_1.ICON_ADD:\n                eIcon = this.ePlusIcon;\n                break;\n            case DragAndDropService_1.ICON_PINNED:\n                eIcon = this.ePinnedIcon;\n                break;\n            case DragAndDropService_1.ICON_MOVE:\n                eIcon = this.eMoveIcon;\n                break;\n            case DragAndDropService_1.ICON_LEFT:\n                eIcon = this.eLeftIcon;\n                break;\n            case DragAndDropService_1.ICON_RIGHT:\n                eIcon = this.eRightIcon;\n                break;\n            case DragAndDropService_1.ICON_GROUP:\n                eIcon = this.eGroupIcon;\n                break;\n            case DragAndDropService_1.ICON_AGGREGATE:\n                eIcon = this.eAggregateIcon;\n                break;\n            case DragAndDropService_1.ICON_PIVOT:\n                eIcon = this.ePivotIcon;\n                break;\n            case DragAndDropService_1.ICON_NOT_ALLOWED:\n                eIcon = this.eDropNotAllowedIcon;\n                break;\n            default:\n                eIcon = this.eHiddenIcon;\n                break;\n        }\n        this.eGhostIcon.appendChild(eIcon);\n        utils_1._.addOrRemoveCssClass(this.eGhostIcon, 'ag-shake-left-to-right', shake);\n    };\n    var DragAndDropService_1;\n    DragAndDropService.ICON_PINNED = 'pinned';\n    DragAndDropService.ICON_ADD = 'add';\n    DragAndDropService.ICON_MOVE = 'move';\n    DragAndDropService.ICON_LEFT = 'left';\n    DragAndDropService.ICON_RIGHT = 'right';\n    DragAndDropService.ICON_GROUP = 'group';\n    DragAndDropService.ICON_AGGREGATE = 'aggregate';\n    DragAndDropService.ICON_PIVOT = 'pivot';\n    DragAndDropService.ICON_NOT_ALLOWED = 'notAllowed';\n    DragAndDropService.GHOST_TEMPLATE = '<div class=\"ag-dnd-ghost\">' +\n        '  <span class=\"ag-dnd-ghost-icon ag-shake-left-to-right\"></span>' +\n        '  <div class=\"ag-dnd-ghost-label\">' +\n        '  </div>' +\n        '</div>';\n    __decorate([\n        context_1.Autowired('gridOptionsWrapper'),\n        __metadata(\"design:type\", gridOptionsWrapper_1.GridOptionsWrapper)\n    ], DragAndDropService.prototype, \"gridOptionsWrapper\", void 0);\n    __decorate([\n        context_1.Autowired('dragService'),\n        __metadata(\"design:type\", dragService_1.DragService)\n    ], DragAndDropService.prototype, \"dragService\", void 0);\n    __decorate([\n        context_1.Autowired('environment'),\n        __metadata(\"design:type\", environment_1.Environment)\n    ], DragAndDropService.prototype, \"environment\", void 0);\n    __decorate([\n        context_1.Autowired('columnController'),\n        __metadata(\"design:type\", columnController_1.ColumnController)\n    ], DragAndDropService.prototype, \"columnController\", void 0);\n    __decorate([\n        context_1.PostConstruct,\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], DragAndDropService.prototype, \"init\", null);\n    __decorate([\n        __param(0, context_1.Qualifier('loggerFactory')),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [logger_1.LoggerFactory]),\n        __metadata(\"design:returntype\", void 0)\n    ], DragAndDropService.prototype, \"setBeans\", null);\n    __decorate([\n        context_1.PreDestroy,\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], DragAndDropService.prototype, \"destroy\", null);\n    DragAndDropService = DragAndDropService_1 = __decorate([\n        context_1.Bean('dragAndDropService')\n    ], DragAndDropService);\n    return DragAndDropService;\n}());\nexports.DragAndDropService = DragAndDropService;\n"]},"metadata":{},"sourceType":"script"}