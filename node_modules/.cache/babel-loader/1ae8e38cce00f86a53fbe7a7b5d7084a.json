{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar eventService_1 = require(\"../eventService\");\n\nvar utils_1 = require(\"../utils\");\n\nvar TouchListener =\n/** @class */\nfunction () {\n  function TouchListener(eElement, preventMouseClick) {\n    var _this = this;\n\n    if (preventMouseClick === void 0) {\n      preventMouseClick = false;\n    }\n\n    this.destroyFuncs = [];\n    this.touching = false;\n    this.eventService = new eventService_1.EventService();\n    this.eElement = eElement;\n    this.preventMouseClick = preventMouseClick;\n    var startListener = this.onTouchStart.bind(this);\n    var moveListener = this.onTouchMove.bind(this);\n    var endListener = this.onTouchEnd.bind(this);\n    this.eElement.addEventListener(\"touchstart\", startListener, {\n      passive: true\n    });\n    this.eElement.addEventListener(\"touchmove\", moveListener, {\n      passive: true\n    }); // we set passive=false, as we want to prevent default on this event\n\n    this.eElement.addEventListener(\"touchend\", endListener, {\n      passive: false\n    });\n    this.destroyFuncs.push(function () {\n      _this.eElement.removeEventListener(\"touchstart\", startListener, {\n        passive: true\n      });\n\n      _this.eElement.removeEventListener(\"touchmove\", moveListener, {\n        passive: true\n      });\n\n      _this.eElement.removeEventListener(\"touchend\", endListener, {\n        passive: false\n      });\n    });\n  }\n\n  TouchListener.prototype.getActiveTouch = function (touchList) {\n    for (var i = 0; i < touchList.length; i++) {\n      var matches = touchList[i].identifier === this.touchStart.identifier;\n\n      if (matches) {\n        return touchList[i];\n      }\n    }\n\n    return null;\n  };\n\n  TouchListener.prototype.addEventListener = function (eventType, listener) {\n    this.eventService.addEventListener(eventType, listener);\n  };\n\n  TouchListener.prototype.removeEventListener = function (eventType, listener) {\n    this.eventService.removeEventListener(eventType, listener);\n  };\n\n  TouchListener.prototype.onTouchStart = function (touchEvent) {\n    var _this = this; // only looking at one touch point at any time\n\n\n    if (this.touching) {\n      return;\n    }\n\n    this.touchStart = touchEvent.touches[0];\n    this.touching = true;\n    this.moved = false;\n    var touchStartCopy = this.touchStart;\n    window.setTimeout(function () {\n      var touchesMatch = _this.touchStart === touchStartCopy;\n\n      if (_this.touching && touchesMatch && !_this.moved) {\n        _this.moved = true;\n        var event_1 = {\n          type: TouchListener.EVENT_LONG_TAP,\n          touchStart: _this.touchStart,\n          touchEvent: touchEvent\n        };\n\n        _this.eventService.dispatchEvent(event_1);\n      }\n    }, 500);\n  };\n\n  TouchListener.prototype.onTouchMove = function (touchEvent) {\n    if (!this.touching) {\n      return;\n    }\n\n    var touch = this.getActiveTouch(touchEvent.touches);\n\n    if (!touch) {\n      return;\n    }\n\n    var eventIsFarAway = !utils_1._.areEventsNear(touch, this.touchStart, 4);\n\n    if (eventIsFarAway) {\n      this.moved = true;\n    }\n  };\n\n  TouchListener.prototype.onTouchEnd = function (touchEvent) {\n    if (!this.touching) {\n      return;\n    }\n\n    if (!this.moved) {\n      var event_2 = {\n        type: TouchListener.EVENT_TAP,\n        touchStart: this.touchStart\n      };\n      this.eventService.dispatchEvent(event_2);\n      this.checkForDoubleTap();\n    } // stops the tap from also been processed as a mouse click\n\n\n    if (this.preventMouseClick) {\n      touchEvent.preventDefault();\n    }\n\n    this.touching = false;\n  };\n\n  TouchListener.prototype.checkForDoubleTap = function () {\n    var now = new Date().getTime();\n\n    if (this.lastTapTime && this.lastTapTime > 0) {\n      // if previous tap, see if duration is short enough to be considered double tap\n      var interval = now - this.lastTapTime;\n\n      if (interval > TouchListener.DOUBLE_TAP_MILLIS) {\n        // dispatch double tap event\n        var event_3 = {\n          type: TouchListener.EVENT_DOUBLE_TAP,\n          touchStart: this.touchStart\n        };\n        this.eventService.dispatchEvent(event_3); // this stops a tripple tap ending up as two double taps\n\n        this.lastTapTime = null;\n      } else {\n        this.lastTapTime = now;\n      }\n    } else {\n      this.lastTapTime = now;\n    }\n  };\n\n  TouchListener.prototype.destroy = function () {\n    this.destroyFuncs.forEach(function (func) {\n      return func();\n    });\n  };\n\n  TouchListener.EVENT_TAP = \"tap\";\n  TouchListener.EVENT_DOUBLE_TAP = \"doubleTap\";\n  TouchListener.EVENT_LONG_TAP = \"longTap\";\n  TouchListener.DOUBLE_TAP_MILLIS = 500;\n  return TouchListener;\n}();\n\nexports.TouchListener = TouchListener;","map":{"version":3,"sources":["/Users/dirkmennecke77/Desktop/Lageplan/node_modules/ag-grid-community/dist/lib/widgets/touchListener.js"],"names":["Object","defineProperty","exports","value","eventService_1","require","utils_1","TouchListener","eElement","preventMouseClick","_this","destroyFuncs","touching","eventService","EventService","startListener","onTouchStart","bind","moveListener","onTouchMove","endListener","onTouchEnd","addEventListener","passive","push","removeEventListener","prototype","getActiveTouch","touchList","i","length","matches","identifier","touchStart","eventType","listener","touchEvent","touches","moved","touchStartCopy","window","setTimeout","touchesMatch","event_1","type","EVENT_LONG_TAP","dispatchEvent","touch","eventIsFarAway","_","areEventsNear","event_2","EVENT_TAP","checkForDoubleTap","preventDefault","now","Date","getTime","lastTapTime","interval","DOUBLE_TAP_MILLIS","event_3","EVENT_DOUBLE_TAP","destroy","forEach","func"],"mappings":"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","sourcesContent":["/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v21.2.2\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar eventService_1 = require(\"../eventService\");\nvar utils_1 = require(\"../utils\");\nvar TouchListener = /** @class */ (function () {\n    function TouchListener(eElement, preventMouseClick) {\n        var _this = this;\n        if (preventMouseClick === void 0) { preventMouseClick = false; }\n        this.destroyFuncs = [];\n        this.touching = false;\n        this.eventService = new eventService_1.EventService();\n        this.eElement = eElement;\n        this.preventMouseClick = preventMouseClick;\n        var startListener = this.onTouchStart.bind(this);\n        var moveListener = this.onTouchMove.bind(this);\n        var endListener = this.onTouchEnd.bind(this);\n        this.eElement.addEventListener(\"touchstart\", startListener, { passive: true });\n        this.eElement.addEventListener(\"touchmove\", moveListener, { passive: true });\n        // we set passive=false, as we want to prevent default on this event\n        this.eElement.addEventListener(\"touchend\", endListener, { passive: false });\n        this.destroyFuncs.push(function () {\n            _this.eElement.removeEventListener(\"touchstart\", startListener, { passive: true });\n            _this.eElement.removeEventListener(\"touchmove\", moveListener, { passive: true });\n            _this.eElement.removeEventListener(\"touchend\", endListener, { passive: false });\n        });\n    }\n    TouchListener.prototype.getActiveTouch = function (touchList) {\n        for (var i = 0; i < touchList.length; i++) {\n            var matches = touchList[i].identifier === this.touchStart.identifier;\n            if (matches) {\n                return touchList[i];\n            }\n        }\n        return null;\n    };\n    TouchListener.prototype.addEventListener = function (eventType, listener) {\n        this.eventService.addEventListener(eventType, listener);\n    };\n    TouchListener.prototype.removeEventListener = function (eventType, listener) {\n        this.eventService.removeEventListener(eventType, listener);\n    };\n    TouchListener.prototype.onTouchStart = function (touchEvent) {\n        var _this = this;\n        // only looking at one touch point at any time\n        if (this.touching) {\n            return;\n        }\n        this.touchStart = touchEvent.touches[0];\n        this.touching = true;\n        this.moved = false;\n        var touchStartCopy = this.touchStart;\n        window.setTimeout(function () {\n            var touchesMatch = _this.touchStart === touchStartCopy;\n            if (_this.touching && touchesMatch && !_this.moved) {\n                _this.moved = true;\n                var event_1 = {\n                    type: TouchListener.EVENT_LONG_TAP,\n                    touchStart: _this.touchStart,\n                    touchEvent: touchEvent\n                };\n                _this.eventService.dispatchEvent(event_1);\n            }\n        }, 500);\n    };\n    TouchListener.prototype.onTouchMove = function (touchEvent) {\n        if (!this.touching) {\n            return;\n        }\n        var touch = this.getActiveTouch(touchEvent.touches);\n        if (!touch) {\n            return;\n        }\n        var eventIsFarAway = !utils_1._.areEventsNear(touch, this.touchStart, 4);\n        if (eventIsFarAway) {\n            this.moved = true;\n        }\n    };\n    TouchListener.prototype.onTouchEnd = function (touchEvent) {\n        if (!this.touching) {\n            return;\n        }\n        if (!this.moved) {\n            var event_2 = {\n                type: TouchListener.EVENT_TAP,\n                touchStart: this.touchStart\n            };\n            this.eventService.dispatchEvent(event_2);\n            this.checkForDoubleTap();\n        }\n        // stops the tap from also been processed as a mouse click\n        if (this.preventMouseClick) {\n            touchEvent.preventDefault();\n        }\n        this.touching = false;\n    };\n    TouchListener.prototype.checkForDoubleTap = function () {\n        var now = new Date().getTime();\n        if (this.lastTapTime && this.lastTapTime > 0) {\n            // if previous tap, see if duration is short enough to be considered double tap\n            var interval = now - this.lastTapTime;\n            if (interval > TouchListener.DOUBLE_TAP_MILLIS) {\n                // dispatch double tap event\n                var event_3 = {\n                    type: TouchListener.EVENT_DOUBLE_TAP,\n                    touchStart: this.touchStart\n                };\n                this.eventService.dispatchEvent(event_3);\n                // this stops a tripple tap ending up as two double taps\n                this.lastTapTime = null;\n            }\n            else {\n                this.lastTapTime = now;\n            }\n        }\n        else {\n            this.lastTapTime = now;\n        }\n    };\n    TouchListener.prototype.destroy = function () {\n        this.destroyFuncs.forEach(function (func) { return func(); });\n    };\n    TouchListener.EVENT_TAP = \"tap\";\n    TouchListener.EVENT_DOUBLE_TAP = \"doubleTap\";\n    TouchListener.EVENT_LONG_TAP = \"longTap\";\n    TouchListener.DOUBLE_TAP_MILLIS = 500;\n    return TouchListener;\n}());\nexports.TouchListener = TouchListener;\n"]},"metadata":{},"sourceType":"script"}